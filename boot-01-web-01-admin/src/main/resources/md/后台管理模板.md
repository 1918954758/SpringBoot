<资源> - [静态资源地址1234](https://wws.lanzous.com/b01c2x0xc)

### 1. 登录页
- IndexController.java
    - login()
- login.html

```java
@Controller
public class IndexController {

    @GetMapping({"/", "/login"})
    public String login() {
        return "login";
    }
}
```
- 请求 / 或者 /login，跳转到login.html页面

### 2. 跳转主页
- IndexController.java
    - index()
- login.html
    - form表单提交
        - 调用 index() 方法
- index() 方法会重定向到 indexPage()

```html
@Controller
public class IndexController {

    /*
     * 主页
     */
    @PostMapping("/index")
    public String index(User user, HttpSession session, Model model) {
        if (Validate.validatelogin(session, user, model)) {
            // 防止表单重复提交
            return "redirect:/main.html";
        } else {
            return "login";
        }

    }

    // 刷新页面执行该方法，而不是重复提交POST，调用/index请求
    @GetMapping("/main.html")
    public String indexPage() {
        return "index";
    }
}
```

```html
login.html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="ThemeBucket">
    <link rel="shortcut icon" href="#" type="image/png">
    <title>Login</title>
    <link href="css/style.css" rel="stylesheet">
    <link href="css/style-responsive.css" rel="stylesheet">
</head>
<body class="login-body">
<div class="container">

    <form class="form-signin" action="index.html" method="post" th:action="@{index}">
        <div class="form-signin-heading text-center">
            <h1 class="sign-title">Sign In</h1>
            <img src="images/login-logo.png" alt=""/>
        </div>
        <div class="login-wrap">
            <label style="color:red" th:text="${msg}">登录</label>
            <input type="userName" name="userName" class="form-control" placeholder="UserName" autofocus>
            <input type="passWord" name="passWord" class="form-control" placeholder="Password">
            <button class="btn btn-lg btn-login btn-block" type="submit">
                <i class="fa fa-check"></i>
            </button>
            <div class="registration">
                Not a member yet?
                <a class="" href="registration.html">
                    Signup
                </a>
            </div>
            <label class="checkbox">
                <input type="checkbox" value="remember-me"> Remember me
                <span class="pull-right">
                    <a data-toggle="modal" href="#myModal"> Forgot Password?</a>
                </span>
            </label>

        </div>
        <!-- Modal -->
        <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal"
             class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Forgot Password ?</h4>
                    </div>
                    <div class="modal-body">
                        <p>Enter your e-mail address below to reset your password.</p>
                        <input type="text" name="email" placeholder="Email" autocomplete="off"
                               class="form-control placeholder-no-fix">
                    </div>
                    <div class="modal-footer">
                        <button data-dismiss="modal" class="btn btn-default" type="button">Cancel</button>
                        <button class="btn btn-primary" type="button">Submit</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal -->
    </form>
</div>
<!-- Placed js at the end of the document so the pages load faster -->
<!-- Placed js at the end of the document so the pages load faster -->
<script src="js/jquery-1.10.2.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/modernizr.min.js"></script>
</body>
</html>
```

### 3. 登录校验用户名密码
- 校验用户名密码
- 将校验通过的用户名和密码放到请求域中
- 替换标签中的默认值

```html
th:text = "${msg}"
```

- 替换文本域中的内容

```html
[[${session.loginUser.userName}]]
<!-- 该方法可以将登录用户的名称添加到主页右上角 -->
```

[image-公共页面抽取](../image/https://www.bilibili.com/video/BV19K4y1L7MT?p=45&spm_id_from=pageDriver)

- 公共页面抽取（对于公共的内容只需修改一次就可，不需要重复修改多个页面）
    - 将多个页面的公共部分抽取到一个页面中，然后使用属性引入即可
- Thymeleaf
    - footer  - 公共页面的名称（templates/footer.html - templeats/*.html）
    - 1)
    - th:fragment="cpoy"
        - <div th:insert="footer :: copy"></div>   (<div th:insert="~{footer :: copy}"></div>)
        - <div th:replace="footer :: copy"></div>   (<div th:replace="~{footer :: copy}"></div>)
        - <div th:include="footer :: copy"></div>   (<div th:include="~{footer :: copy}"></div>)
    - 2)
    - id="cpoy"
        - <div th:insert="footer :: #copy"></div>   (<div th:insert="~{footer :: #copy}"></div>)
        - <div th:replace="footer :: #copy"></div>   (<div th:replace="~{footer :: #copy}"></div>)
        - <div th:include="footer :: #copy"></div>   (<div th:include="~{footer :: #copy}"></div>)
- 举例区别 th:insert & th:replace & th:include
```html
templates/footer.html
<footer th:fragment="copy">
  &copy; 2011 The Good Thymes Virtual Grocery
</footer>


<div th:insert="footer :: copy"></div>
    插入结果：
    > <div>
    >     <footer>
    >         &copy; 2011 The Good Thymes Virtual Grocery
    >     </footer>
    > </div>
<div th:replace="footer :: copy"></div>
    插入结果：
    > <footer>
    >     &copy; 2011 The Good Thymes Virtual Grocery
    > </footer>
<div th:include="footer :: copy"></div>
    插入结果：
    > <div>
    >     &copy; 2011 The Good Thymes Virtual Grocery
    > </div>
```

- 将 *-table.html页面的公共部分抽取到 templates/common/commons.html中
- 编写 *-table.html对应的tableController.java

[Thymeleaf引入页面官方文档](https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#template-layout)

- 抽取index.html页面的公共部分 commonLinks commonLeftMenu commonHeader & commonScript
- 可以在源代码里面查看抽取部分是否正确引入


### 4. 