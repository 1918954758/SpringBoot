## 异常处理

> 1. SpringBoot 默认会查找 templates/error/5xx.html or templates/error/4xx.html页面显示错误页


> 2. 准备错误自动跳转

> package eg

- For example
```text
to map 404 to a static HTML file, your directory structure would be as follows:
src/
 +- main/
     +- java/
     |   + <source code>
     +- resources/
         +- public/
             +- error/
             |   +- 404.html
             +- <other public assets>
```
or
```text
To map all 5xx errors by using a FreeMarker template, your directory structure would be as follows:
src/
 +- main/
     +- java/
     |   + <source code>
     +- resources/
         +- templates/
             +- error/
             |   +- 5xx.ftlh
             +- <other templates>
```

## ErrorMvcAutoConfiguration (error handle configuration)
**可以配置的属性绑定在：** @EnableConfigurationProperties({ ServerProperties.class, WebMvcProperties.class })

**注册的bean**

- 
    - @bean DefaultErrorAttributes   --> id:errorAttributes
        - 保存错误属性：storeErrorAttributes(request, ex);
            - exception、trace、message、errors、timestamp...
    - @bean BasicErrorController  --> id:basicErrorController
        - BasicErrorController是一个映射  @RequestMapping("${server.error.path:${error.path:/error}}")
            - 处理错误页，返回ModelAndView
    - @bean ErrorPageCustomizer  --> id:errorPageCustomizer
        - 自定义错误页 ：public void registerErrorPages(ErrorPageRegistry errorPageRegistry) {...}
    - @bean PreserveErrorControllerTargetClassPostProcessor  --> id:preserveErrorControllerTargetClassPostProcessor
        - postProcessBeanFactory() --> 使用这个方法，我们可以在容器初始化时，做一些业务操作
    - @bean DefaultErrorViewResolver  --> id:conventionErrorViewResolver   (@ConditionalOnMissingBean(ErrorViewResolver.class))
        - 在静态代码块中预定义了两个错误视图页 SERVER_ERROR“5xx”和 CLIENT_ERROR“4xx”
        - 解析错误视图的时候会拼接 "error/" + viewName，， 而viewName就是状态码（404,501,502等）
    - @bean(name="error") 白页错误视图配置，在class WhitelabelErrorViewConfiguration{...}中
        - 当容器中没有名叫error的bean是才使用默认错误视图页